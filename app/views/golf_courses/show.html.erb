<p id="notice"><%= notice %></p>
<h1><%= @golf_course.name %></h1><br>

<% if current_golfer.golfer_index %>
  <h4>Your Course Handicap, <%= current_golfer.name %>: <%= current_golfer.course_handicap(@golf_course).round(1) %></h4><br>
<% end %>

<div>
  <h4>Course Description:</h4>
  <p><%= @golf_course.description %></p>
</div><br>

<div class='tags-list'>
  <ul>
    <% @golf_course.tags.each do |tag|%>
      <li><%= tag.name %></li>
    <% end %>
  </ul>
</div><br>

<div>
  <h4>Course Details:</h4>

  <p>Holes: <%= @golf_course.holes %></p>
  <p>Total Par: <%= @golf_course.total_par %></p>
  <p>Course Slope: <%= @golf_course.course_slope %></p>
  <p>Course rating: <%= @golf_course.course_rating %></p>
  <% if @golf_course.rounds.present? %>
    <p>Low Score: <%= @golf_course.course_lowest_round.score %> by <%= @golf_course.course_lowest_round.golfer.name %></p>
  <% end %>
</div><br>

<div>
  <% if @golf_course.golf_course_comments.present? %>
    <h4>Comments</h4>
    <% @golf_course.golf_course_comments.each do |comment| %>
      <ul>
        <li><%= comment.content  %>  -  by <%= comment.golfer.name %> on <%= comment.created_at.strftime('%m/%d/%Y') %></li>
      </ul>
    <% end %>
  <% end %>
</div>


<button class="show-rounds" data-id="<%= @golf_course.id %>">Show all Rounds</button><br><br>
<%= button_to 'Edit Golf Course', edit_golf_course_path, method: 'get' %><br>
<%= button_to('Delete Golf Course', golf_course_path(@golf_course), method: 'delete') if current_golfer.id == 1 %>

<!-- <table style='width: 45%'>
  <thead>
    <tr>
      <th align="left"><strong>Golfer</strong></th>
      <th align="left"><strong>Score</strong></th>
      <th align="left"><strong>Over/Under</strong></th>
      <th align="left"><strong>Date Posted</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr id="all-rounds">

    </tr>
  </tbody>
</table> -->

<ul id="all-rounds-gc-<%= @golf_course.id %>">

</ul>
<script type="text/javascript" charset="utf-8">
  $(function() {
    $(".show-rounds").on("click", function(e) {
      e.preventDefault();
      var id = $(this).data("id");
      $.get("/golf_courses/" + id + "/rounds.json", function(data) {
        var rounds = data;
        var roundsList = '';
        rounds.forEach(function(round) {
          roundsList += `<li> ${round.golfer.name}` + ' - ' +
          `${round.score}` + ' - ' +
          `${round.display_from_par}` + ' - ' +
          `${round.created_at} </li>`;
        });
        $("#all-rounds-gc-" + id).html(roundsList);
      });
    });
  });
</script>
